# Програмний модуль @molfar/api-manti | Програма та методика випробувань

## Об'єкт випробувань

Об'єктом випробувань є **Програмний модуль @molfar/api-manti – "Програмний модуль веб-сервісу для інформаційного пошуку повідомлень"**, який написаний мовою програмування JavaScript та призначений для інформаційного пошуку збережених повідомлень в базі даних [ManticoreSearch](https://manticoresearch.com/).

## Мета випробувань

Перевірити надійність функціонування програмного модуля @molfar/api-manti та його окремих функцій. 

## Вимоги до програмного модуля

Програмний модуль повинен задовільнати наступним вимогам. 

Функціонування програмного модуля **не має призводити до збою (фатального порушення роботи системи)** та **видавати діагностику стану системи та повідомлення про будь-які помилки, що виникли**:
- програмний модуль у відповідь на запит "Отримати загальний опис сервісу" повинен повернути сторінку загального опису, код відповіді – 200
- програмний модуль у відповідь на запит "Отримати статистику сервісу" повинен повернути сторінку статистики, код відповіді – 302
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути збережені дані у виді графику по запиту з БД, код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле queries відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле points відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле points < 0", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле queries порожнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле startAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch у вигляді графіку" повинен повернути "Поле stopAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути агреговані дані, код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле queries відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле aggregateBy відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Агрегація даних по відсутньому полю в БД", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле order відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Сортування відповіді by desc", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле limit відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле startAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле stopAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле order не вірне значення", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле limit < 0", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати агрегацію даних з ManticoreSearch" повинен повернути "Поле масиву query пусте", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути збережені дані по запиту з БД, код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле queries відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле return відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле return "test" відсутнє в БД", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле limit відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле limit < 0", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле startIndex відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле startIndex < 0", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле startAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле stopAt відсутнє", код відповіді - 200
- програмний модуль у відповідь на запит "Отримати інформацію з ManticoreSearch" повинен повернути "Поле stopAt пусте", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути збережені дані по запиту з БД, код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поле в запиті type відсутнє в БД", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поле limit встановлено", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поля limit,startAt встановлено", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поля limit,startAt,stopAt встановлено", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поле startAt > stopAt", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поле startAt > поточного", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поле stopAt < поточного", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поля limit,startAt,stopAt встановлено і type datatime", код відповіді - 200
- програмний модуль у відповідь на запит "Створити словник" повинен повернути "Поля limit,startAt,stopAt встановлено і type em", код відповіді - 200
- програмний модуль у відповідь на запит "Перевірка пошуку в ManticoreSearch" повинен повернути помилку "getaddrinfo ENOTFOUND undefined"
- програмний модуль у відповідь на запит "Перевірка пошуку в ManticoreSearch" повинен повернути дані, що id < -1
- програмний модуль у відповідь на запит "Перевірка пошуку в ManticoreSearch" повинен повернути пусті дані, так як початок < 0
- програмний модуль у відповідь на запит "Перевірка пошуку в ManticoreSearch" повинен повернути пусті дані, так як кінець < 0

## Вимоги до програмної документації

Склад програмної документації, пропонованої на випробуванні:
- [ГОСТ 19.402-78.](https://docs.cntd.ru/document/1200007652) ЕСПД. Опис програми
- [ГОСТ 19.301-79.](https://docs.cntd.ru/document/1200007650) ЕСПД. Програма та методика випробувань. Вимоги до змісту та оформлення
- [ГОСТ 19.401-78.](https://docs.cntd.ru/document/1200007651) ЕСПД. Текст програми. Вимоги до змісту та оформлення

## Засоби і порядок випробувань

Для запуску комплексів тестів використовуються менеджер пакетів для мови програмування JavaScript – `npm (Node Package Manager)`, та команда

```shell
npm test
```

Порядок проведення випробувань:
1. Виконати комплекс тестів **"Тести для шляху "/""**, запустивши файл `root.test.js`
2. Виконати комплекс тестів **"Тести для шляху "/timeline""**, запустивши файл `timeline.test.js`
3. Виконати комплекс тестів **"Тести для шляху "/aggregation""**, запустивши файл `aggregation.test.js`
4. Виконати комплекс тестів **"Тести для шляху "/content""**, запустивши файл `content.test.js`
5. Виконати комплекс тестів **"Тести для шляху "/dict/person""**, запустивши файл `dict.test.js`
6. Виконати комплекс тестів **"Тести для файлу searcher.js"**, запустивши файл `searcher.test.js`

Для обробки результатів тестування та створення протоколу випробувань в HTML використовується `Jest reporter` версії [2.1.6](https://www.npmjs.com/package/jest-html-reporters/v/2.1.6).

## Методи випробувань

Для проведення випробувань пропонується наступий переліків комплексів тестів та окремих тестових прикладів:
- Комплекс тестів **"Тести для шляху "/""**, що міститься у файлі `root.test.js`, має наступні тестові приклади:
	- Тест перевірки запиту "/" -  "Отримати загальний опис сервісу"
	- Тест перевірки запиту "/metrics" - "Отримати статистику сервісу"
- Тест **"Тести для шляху "/api/timeline""**, що міститься у файлі `timeline.test.js`, для перевірки запиту "Отримати інформацію з ManticoreSearch у вигляді графіку"
- Тест **"Тести для шляху "/api/aggregation""**, що міститься у файлі `aggregation.test.js`, для перевірки запиту "Отримати агрегацію даних з ManticoreSearch"
- Тест **"Тести для шляху "/api/content""**, що міститься у файлі `content.test.js`, для перевірки запиту "Отримати інформацію з ManticoreSearch"
- Тест **"Тести для шляху "/api/dict/person""**, що міститься у файлі `dict.test.js`, для перевірки запиту "Cтворити словник"
- Тест **"Тести для файлу searcher.js"**, що міститься у файлі `searcher.test.js`, для перевірки пошуку в ManticoreSearch 

## Додаток

Вміст тестових файлів, результати тестування програмного модуля та розширена інформація про тестове покриття, яке в середньому склало 63.54%, наведено в:

<a href="../testReport/test-report.html" target="blank">Протокол випробувань</a>

<a href="../coverage/lcov-report/index.html" target="blank">Тестове покриття</a>
